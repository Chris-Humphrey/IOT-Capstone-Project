{"ast":null,"code":"import { AUTH_USER, AUTH_ERROR, AUTH_SIGNOUT, COL_ADD_PLANT, COL_DISPLAY_PLANT, COL_REMOVE_PLANT, WISH_ADD_PLANT, WISH_DISPLAY_PLANT, WISH_REMOVE_PLANT } from './types';\nimport axios from 'axios'; // REFACTORING SIGNUP\n\nlet decodeToken = token => {\n  let split_token = token.split('.');\n  let token_payload = split_token[1];\n  let decoded_token_string = atob(token_payload);\n  let decoded_token = JSON.parse(decoded_token_string);\n  localStorage.setItem('user_id', decoded_token.sub);\n  localStorage.setItem('user_name', decoded_token.user_name);\n  localStorage.setItem('zipcode', decoded_token.zipcode); // console.log(`local storage user ID: ${localStorage.user_id}`)\n  // console.log(`local Storage user name: ${localStorage.user_name}`)\n};\n\nlet addWeather = () => {\n  dispatch({\n    type: addWeather,\n    payload: weather\n  });\n};\n\nexport const signup = (formProps, callback) => async dispatch => {\n  try {\n    let response = await axios.post('/signup', formProps);\n    decodeToken(response.data.token); //dispatch\n\n    dispatch({\n      type: AUTH_USER,\n      payload: response.data.token,\n      isLoggedIn: true,\n      username: formProps.username,\n      zipcode: formProps.zipcode\n    });\n    localStorage.setItem('token', response.data.token);\n    callback();\n  } catch (e) {\n    dispatch({\n      type: AUTH_ERROR,\n      payload: 'That email is already in use...'\n    });\n  }\n};\nexport const signin = (formProps, callback) => async dispatch => {\n  try {\n    let response = await axios.post('/signin', formProps);\n    decodeToken(response.data.token);\n    addWeather();\n    console.log(localStorage.zipcode); // console.log('signin form props')\n    // console.log(formProps)\n\n    dispatch({\n      type: AUTH_USER,\n      payload: response.data.token,\n      isLoggedIn: true,\n      username: localStorage.user_name,\n      zipcode: localStorage.zipcode\n    });\n    localStorage.setItem('token', response.data.token);\n    callback();\n  } catch (e) {\n    dispatch({\n      type: AUTH_ERROR,\n      payload: 'The email or password is incorrect...'\n    });\n  }\n};\nexport const signout = () => {\n  localStorage.clear();\n  return {\n    type: AUTH_SIGNOUT,\n    payload: '',\n    isLoggedIn: false\n  };\n}; //Add/remove from collection:\n\nexport const addToCollectionDb = plant => async dispatch => {\n  let response = await axios.post('/colAdd', {\n    user_id: localStorage.user_id,\n    plant_name: plant.name,\n    plant_id: plant.id,\n    moisture: plant.moisture,\n    temperature_range: plant.temperature_range,\n    shade_tolerance: plant.shade_tolerance,\n    image_url: plant.image_url\n  });\n  dispatch({\n    type: COL_ADD_PLANT,\n    payload: plant\n  });\n};\nexport const displayCollectionDb = () => async dispatch => {\n  let response = await axios.post('/collection', {\n    user_id: localStorage.user_id\n  });\n  console.log('response');\n  console.log(response.data);\n  dispatch({\n    type: COL_DISPLAY_PLANT,\n    payload: response.data\n  });\n};\nexport const removeFromCollectionDb = plant => async dispatch => {\n  let plant_id = plant.item.id;\n  console.log(plant_id);\n  let user_id = localStorage.user_id;\n  let response = await axios.post('/colRemove', {\n    user_id: user_id,\n    plant_id: plant_id\n  });\n  console.log(\"remove from wishlist action\");\n  console.log(plant);\n  console.log(response);\n  dispatch({\n    type: COL_REMOVE_PLANT,\n    payload: response\n  });\n};\nexport const addToWishlistDb = plant => async dispatch => {\n  let response = await axios.post('/wishAdd', {\n    user_id: localStorage.user_id,\n    plant_name: plant.name,\n    plant_id: plant.id,\n    moisture: plant.moisture,\n    temperature_range: plant.temperature_range,\n    shade_tolerance: plant.shade_tolerance,\n    image_url: plant.image_url\n  });\n  dispatch({\n    type: WISH_ADD_PLANT,\n    payload: plant\n  });\n};\nexport const displayWishlistDb = () => async dispatch => {\n  let response = await axios.post('/wishlist', {\n    user_id: localStorage.user_id\n  });\n  console.log('display response');\n  console.log(response);\n  dispatch({\n    type: WISH_DISPLAY_PLANT,\n    payload: response.data\n  });\n};\nexport const removeFromWishlistDb = plant => async dispatch => {\n  let plant_id = plant.item.id;\n  console.log(plant_id);\n  let user_id = localStorage.user_id;\n  let response = await axios.post('/wishRemove', {\n    user_id: user_id,\n    plant_id: plant_id\n  });\n  console.log(\"remove from wishlist action\");\n  console.log(plant);\n  console.log(response);\n  dispatch({\n    type: WISH_REMOVE_PLANT,\n    payload: response\n  });\n};\n\naddWeather = () => async dispatch => {\n  let zipcode = localStorage.zipcode;\n  console.log(object);\n};","map":{"version":3,"sources":["/Users/tarekalbeb/Downloads/gardenia2-master/client/src/actions/index.js"],"names":["AUTH_USER","AUTH_ERROR","AUTH_SIGNOUT","COL_ADD_PLANT","COL_DISPLAY_PLANT","COL_REMOVE_PLANT","WISH_ADD_PLANT","WISH_DISPLAY_PLANT","WISH_REMOVE_PLANT","axios","decodeToken","token","split_token","split","token_payload","decoded_token_string","atob","decoded_token","JSON","parse","localStorage","setItem","sub","user_name","zipcode","addWeather","dispatch","type","payload","weather","signup","formProps","callback","response","post","data","isLoggedIn","username","e","signin","console","log","signout","clear","addToCollectionDb","plant","user_id","plant_name","name","plant_id","id","moisture","temperature_range","shade_tolerance","image_url","displayCollectionDb","removeFromCollectionDb","item","addToWishlistDb","displayWishlistDb","removeFromWishlistDb","object"],"mappings":"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","sourcesContent":["\nimport { AUTH_USER, AUTH_ERROR, AUTH_SIGNOUT, COL_ADD_PLANT, COL_DISPLAY_PLANT, COL_REMOVE_PLANT, WISH_ADD_PLANT, WISH_DISPLAY_PLANT, WISH_REMOVE_PLANT} from './types';\n\nimport axios from 'axios';\n\n\n// REFACTORING SIGNUP\n\nlet decodeToken = (token)=>{\n    let split_token = token.split('.')\n    let token_payload = split_token[1];\n    let decoded_token_string = atob(token_payload);\n    let decoded_token = JSON.parse(decoded_token_string)\n    localStorage.setItem('user_id', decoded_token.sub);\n    localStorage.setItem('user_name', decoded_token.user_name)\n    localStorage.setItem('zipcode', decoded_token.zipcode)\n    // console.log(`local storage user ID: ${localStorage.user_id}`)\n    // console.log(`local Storage user name: ${localStorage.user_name}`)\n}\n\nlet addWeather = () => {\n  dispatch({type: addWeather, payload: weather})\n}\n\n\nexport const signup = (formProps, callback) => async dispatch =>{\n\n    try{\n        let response = await axios.post('/signup', formProps);\n        decodeToken(response.data.token)\n\n        //dispatch\n\n        dispatch({type: AUTH_USER, payload: response.data.token, isLoggedIn: true, username: formProps.username, zipcode: formProps.zipcode});\n        localStorage.setItem('token', response.data.token);\n        callback();\n    }\n    catch(e){\n        dispatch({type: AUTH_ERROR, payload: 'That email is already in use...'})\n    }\n};\n\nexport const signin = (formProps, callback) => async dispatch => {\n\n    try {\n        let response = await axios.post('/signin', formProps);\n        decodeToken(response.data.token);\n        addWeather();\n        console.log(localStorage.zipcode)\n        // console.log('signin form props')\n        // console.log(formProps)\n        \n        dispatch({type: AUTH_USER, payload: response.data.token, isLoggedIn: true, username: localStorage.user_name, zipcode: localStorage.zipcode});\n\n        localStorage.setItem('token', response.data.token);\n        callback();\n    }\n    catch(e){\n        dispatch({type: AUTH_ERROR, payload: 'The email or password is incorrect...'})\n    }\n\n}\n\nexport const signout = () => {\n    localStorage.clear()\n    return {\n        type: AUTH_SIGNOUT,\n        payload: '',\n        isLoggedIn: false\n    }\n}\n\n//Add/remove from collection:\nexport const addToCollectionDb = (plant) => async dispatch =>{\n\n    let response = await axios.post('/colAdd', \n    {user_id: localStorage.user_id, plant_name: plant.name, plant_id: plant.id, \n        moisture: plant.moisture, temperature_range: plant.temperature_range,\n        shade_tolerance: plant.shade_tolerance, image_url:plant.image_url\n    })\n    dispatch({type: COL_ADD_PLANT, payload: plant})\n}\n\nexport const displayCollectionDb = () => async dispatch => {\n    let response = await axios.post('/collection', {user_id: localStorage.user_id})\n    console.log('response')\n    console.log(response.data)\n    dispatch({type: COL_DISPLAY_PLANT, payload: response.data});\n}\n\nexport const removeFromCollectionDb = (plant) => async dispatch => {\n    \n    let plant_id = plant.item.id\n    console.log(plant_id)\n    let user_id = localStorage.user_id\n    let response = await axios.post('/colRemove', {user_id:user_id, plant_id: plant_id})\n    console.log(`remove from wishlist action`)\n    console.log(plant)\n    console.log(response)\n    dispatch({type: COL_REMOVE_PLANT, payload: response})\n}\n\nexport const addToWishlistDb = (plant) => async dispatch => {\n    let response = await axios.post('/wishAdd', \n    {user_id: localStorage.user_id, plant_name: plant.name, plant_id: plant.id, \n        moisture: plant.moisture, temperature_range: plant.temperature_range,\n        shade_tolerance: plant.shade_tolerance, image_url:plant.image_url\n    })\n    dispatch({type: WISH_ADD_PLANT, payload: plant})\n}\n\nexport const displayWishlistDb = () => async dispatch => {\n    let response = await axios.post('/wishlist', {user_id: localStorage.user_id})\n    console.log('display response')\n    console.log(response)\n    dispatch({ type: WISH_DISPLAY_PLANT, payload: response.data});\n}\n\nexport const removeFromWishlistDb = (plant) => async dispatch =>{\n    let plant_id = plant.item.id\n    console.log(plant_id)\n    let user_id = localStorage.user_id\n    let response = await axios.post('/wishRemove', {user_id:user_id, plant_id: plant_id})\n    console.log(`remove from wishlist action`)\n    console.log(plant)\n    console.log(response)\n    dispatch({type: WISH_REMOVE_PLANT, payload: response})\n}\n\naddWeather = () => async dispatch => {\n  let zipcode = localStorage.zipcode;\n  console.log(object)\n}\n\n\n"]},"metadata":{},"sourceType":"module"}