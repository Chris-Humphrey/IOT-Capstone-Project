{"ast":null,"code":"import _objectSpread from \"/Users/volleyball_chik_100/DigitalCrafts/Projects/IOT-Practice-2/gardenia2/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/volleyball_chik_100/DigitalCrafts/Projects/IOT-Practice-2/gardenia2/client/src/components/Collection.js\";\nimport React from 'react';\nimport jsonData from '../data/plants.json';\nimport WeatherComponent from './Weather';\nimport { connect } from 'react-redux';\nimport { addToCollectionDb, displayCollectionDb, removeFromCollectionDb } from '../actions/';\nimport { Button, // Container,\n// Divider,\n// Grid,\n// Header,\n// Icon,\nImage, Label, // List,\n// Menu,\n// Responsive,\n// Segment,\n// Sidebar,\n// Visibility,\nInput, Card, Form, Header // Search\n} from 'semantic-ui-react';\nimport '../components/dashboard.css';\nlet sensorData = 'https://io.adafruit.com/api/feeds?x-aio-key=1de8b4e601e94f9a96f29c07626470c2';\nlet jsonPlants = jsonData.plants;\n\nclass Collection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      plants: jsonPlants,\n      plant: [],\n      collection: [],\n      remove: {},\n      sensor: 0\n    };\n    this.addToCollection = this.addToCollection.bind(this);\n    this.displayCollection = this.displayCollection.bind(this);\n    this.removeFromCollection = this.removeFromCollection.bind(this);\n  }\n\n  addToCollection(e) {\n    e.preventDefault();\n    let plants = this.state.plants;\n    let plantName = this.plantNameSearchTerm.value;\n    console.log(plantName);\n\n    if (plantName !== '') {\n      for (let i = 0; i < plants.length; i++) {\n        let plant = plants[i];\n\n        if (plantName === plant.name) {\n          let p = new Promise((resolve, reject) => {\n            resolve(this.props.addToCollectionDb(plant));\n          });\n          p.then(() => {\n            this.displayCollection();\n          });\n          p.then(() => {\n            this.setState({\n              collection: this.state.collection.concat(plant)\n            });\n          });\n          console.log('vero: after call');\n          console.log(\"added \".concat(plantName, \" to collection db\"));\n          console.log(\"added to collection db\");\n        }\n      }\n    } else {\n      alert('fill in blanks');\n    }\n  }\n\n  displayCollection() {\n    this.props.displayCollectionDb();\n  }\n\n  async removeFromCollection(e, plants) {\n    e.preventDefault();\n    console.log(\"remove plant \".concat(plants));\n    await this.props.removeFromCollectionDb(plants);\n    this.setState({\n      remove: plants\n    });\n  }\n\n  componentDidMount() {\n    this.displayCollection();\n    setInterval(() => {\n      this.sensorUpdate();\n    }, 5000);\n  }\n\n  sensorUpdate() {\n    fetch(sensorData).then(response => {\n      return response.json();\n    }).then(data => {\n      this.setState(_objectSpread({}, this.state, {\n        sensor: data[0].last_value\n      }));\n    }).catch(error => {\n      console.log('error', error);\n    });\n  } // componentDidUpdate(prevProps){\n  //   if(this.props.dbWishlist !== prevProps.dbWishlist){\n  //     this.addToWishlist();\n  //   }\n  // }\n\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"fluid-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(WeatherComponent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"searchbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ui grid center aligned\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Search Plants\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(Form, {\n      onSubmit: this.addToCollection,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"ui icon input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      style: {\n        paddingRight: '20px'\n      },\n      id: \"addInput\",\n      placeholder: \"Plant Name\",\n      ref: input => this.plantNameSearchTerm = input,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      class: \"search icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    })), React.createElement(Button, {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Add To Collection\")))), React.createElement(Card.Group, {\n      className: \"segment centered\",\n      id: \"cardback\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, this.props.dbCollection.map(item => {\n      return React.createElement(Card, {\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Card.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Image, {\n        floated: \"right\",\n        src: item.image_url,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), React.createElement(Card.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, item.plant_name)), React.createElement(Card.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Card.Description, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, item.temperature_range, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), item.shade_tolerance), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(Card.Description, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Moisture:\", this.state.sensor <= 15 && React.createElement(React.Fragment, null, React.createElement(Label, {\n        circular: true,\n        color: 'red',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, this.state.sensor), React.createElement(Card.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Image, {\n        src: \"https://i.gifer.com/7Q0a.gif\",\n        style: {\n          width: \"100px\"\n        },\n        floated: \"right\",\n        rounded: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }))), this.state.sensor <= 35 && this.state.sensor >= 16 && React.createElement(React.Fragment, null, React.createElement(Label, {\n        circular: true,\n        color: 'yellow',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, this.state.sensor), React.createElement(Image, {\n        src: \"https://thumbs.gfycat.com/ChiefHeftyBasil-small.gif\",\n        style: {\n          width: \"100px\"\n        },\n        floated: \"right\",\n        rounded: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), this.state.sensor <= 100 && this.state.sensor >= 36 && React.createElement(React.Fragment, null, React.createElement(Label, {\n        circular: true,\n        color: 'green',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, this.state.sensor), React.createElement(Image, {\n        src: \"https://thumbs.gfycat.com/ChiefHeftyBasil-small.gif\",\n        style: {\n          width: \"100px\"\n        },\n        floated: \"right\",\n        rounded: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })))), React.createElement(Card.Content, {\n        extra: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ui two buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: e => this.removeFromCollection(e, {\n          item\n        }),\n        basic: true,\n        color: \"red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Remove from collection\"))));\n    }))));\n  }\n\n}\n\nlet mapStateToProps = state => {\n  return {\n    collection: state.collectionReducer.collection,\n    dbCollection: state.collectionReducer.dbCollection,\n    zipcode: state.auth.zipcode\n  };\n};\n\nlet mapDispatchToProps = dispatch => {\n  return {\n    removeFromCollectionDb: plant => dispatch(removeFromCollectionDb(plant)),\n    addToCollectionDb: plant => dispatch(addToCollectionDb(plant)),\n    displayCollectionDb: () => dispatch(displayCollectionDb())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Collection);","map":{"version":3,"sources":["/Users/volleyball_chik_100/DigitalCrafts/Projects/IOT-Practice-2/gardenia2/client/src/components/Collection.js"],"names":["React","jsonData","WeatherComponent","connect","addToCollectionDb","displayCollectionDb","removeFromCollectionDb","Button","Image","Label","Input","Card","Form","Header","sensorData","jsonPlants","plants","Collection","Component","constructor","props","state","plant","collection","remove","sensor","addToCollection","bind","displayCollection","removeFromCollection","e","preventDefault","plantName","plantNameSearchTerm","value","console","log","i","length","name","p","Promise","resolve","reject","then","setState","concat","alert","componentDidMount","setInterval","sensorUpdate","fetch","response","json","data","last_value","catch","error","render","paddingRight","input","dbCollection","map","item","id","image_url","plant_name","temperature_range","shade_tolerance","width","mapStateToProps","collectionReducer","zipcode","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport jsonData from '../data/plants.json';\nimport WeatherComponent from './Weather';\nimport {connect} from 'react-redux';\nimport {addToCollectionDb, displayCollectionDb, removeFromCollectionDb} from '../actions/';\nimport {\n    Button,\n    // Container,\n    // Divider,\n    // Grid,\n    // Header,\n    // Icon,\n    Image,\n    Label,\n    // List,\n    // Menu,\n    // Responsive,\n    // Segment,\n    // Sidebar,\n    // Visibility,\n    Input,\n    Card,\n    Form,\n    Header\n    // Search\n  } from 'semantic-ui-react';\n  import '../components/dashboard.css';\n\n  let sensorData = 'https://io.adafruit.com/api/feeds?x-aio-key=1de8b4e601e94f9a96f29c07626470c2';\n\n\nlet jsonPlants = jsonData.plants\nclass Collection extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        plants: jsonPlants,\n        plant: [],\n        collection: [],\n        remove: {},\n        sensor: 0\n      }\n      this.addToCollection = this.addToCollection.bind(this)\n      this.displayCollection = this.displayCollection.bind(this)\n      this.removeFromCollection = this.removeFromCollection.bind(this)\n    }\n\n    addToCollection(e){\n        e.preventDefault();\n        let plants = this.state.plants;\n        let plantName = this.plantNameSearchTerm.value;\n        console.log(plantName)\n        if (plantName !== ''){\n            for(let i=0; i<plants.length; i++){\n            let plant = plants[i];\n            if (plantName === plant.name){\n\n              let p = new Promise((resolve, reject)=>{\n\n                resolve(this.props.addToCollectionDb(plant)) \n              });\n\n\n              p.then(()=>{\n                this.displayCollection()\n              })\n              p.then(()=>{\n                this.setState({\n                  collection: this.state.collection.concat(plant)\n                })\n              })\n              \n\n              console.log('vero: after call')     \n              \n\n              \n              \n              console.log(`added ${plantName} to collection db`)\n              console.log(`added to collection db`)\n        }\n      }\n    }\n        else{\n        alert('fill in blanks')\n        }\n  }     \n\ndisplayCollection(){\n  this.props.displayCollectionDb()\n}\n\nasync removeFromCollection(e, plants){\n    e.preventDefault();\n    console.log(`remove plant ${plants}`)\n\n\n    await this.props.removeFromCollectionDb(plants)\n\n    this.setState({\n      remove: plants \n    })\n\n    \n}\n\ncomponentDidMount(){\n    this.displayCollection()\n    setInterval(() => {\n        this.sensorUpdate()\n    }, 5000);\n  }\n\nsensorUpdate() {\n    fetch(sensorData)\n    .then((response) => {\n        return response.json()\n    })\n    .then((data) => {\n        this.setState({\n            ...this.state,\n            sensor: data[0].last_value\n        })\n    })\n    .catch((error) => {\n        console.log('error', error)\n    })\n}\n\n// componentDidUpdate(prevProps){\n//   if(this.props.dbWishlist !== prevProps.dbWishlist){\n//     this.addToWishlist();\n//   }\n// }\n\nrender() {\n    return (\n        <>\n        <div className='fluid-container'>\n        <WeatherComponent />\n        <div id=\"searchbar\">\n          <div className=\"ui grid center aligned\">\n              <Header>Search Plants</Header><br/>\n          <Form onSubmit={this.addToCollection}>\n            <div class=\"ui icon input\">\n                <input\n                    type=\"text\"\n                    style={{paddingRight: '20px'}}\n                    id=\"addInput\"\n                    placeholder=\"Plant Name\"\n                    ref={ input => this.plantNameSearchTerm = input}\n                />\n                <i aria-hidden=\"true\" class=\"search icon\"></i>\n            </div>\n            <Button type=\"submit\">\n            Add To Collection\n            </Button>\n        </Form>\n        </div>\n        </div>\n\n      <Card.Group className=\"segment centered\" id=\"cardback\">\n          {this.props.dbCollection.map((item) => {\n            return (\n                <Card key={item.id}>\n                <Card.Content>\n                  <Image floated='right' src={item.image_url} />\n                  <Card.Header>{item.plant_name}</Card.Header>\n                  </Card.Content>\n                <Card.Content>\n                    <Card.Description>\n                        {item.temperature_range}<br/>\n                        {item.shade_tolerance}\n                    </Card.Description><br/>\n                    <Card.Description>\n                    Moisture:\n                    { (this.state.sensor <= 15) &&\n                    <>\n                    <Label circular color={'red'}>\n                        {this.state.sensor}\n                    </Label>\n                    <Card.Content>\n                         <Image src=\"https://i.gifer.com/7Q0a.gif\" style={{width: \"100px\"}} floated=\"right\" rounded />\n\n                    </Card.Content>\n                    </>\n                    }\n                    { (this.state.sensor <= 35 && this.state.sensor >= 16) &&\n                    <>\n                    <Label circular color={'yellow'}>\n                        {this.state.sensor}\n                    </Label>\n                    <Image src=\"https://thumbs.gfycat.com/ChiefHeftyBasil-small.gif\" style={{width: \"100px\"}} floated=\"right\" rounded />\n                    </>\n                    }\n                    { (this.state.sensor <= 100 && this.state.sensor >= 36) &&\n                    <>\n                    <Label circular color={'green'}>\n                        {this.state.sensor}\n                    </Label>\n                    <Image src=\"https://thumbs.gfycat.com/ChiefHeftyBasil-small.gif\" style={{width: \"100px\"}} floated=\"right\" rounded />\n                    </>\n                    }\n\n                    </Card.Description>\n                </Card.Content>\n                <Card.Content extra>\n                  <div className='ui two buttons'>\n                    <Button onClick={(e)=> this.removeFromCollection(e, {item})} \n                        basic color='red'>\n                      Remove from collection\n                    </Button>\n                  </div>\n                </Card.Content>\n              </Card>\n            )\n          }\n          )}\n        </Card.Group>\n  </div>\n  </>\n\n    )}\n        }\n\nlet mapStateToProps = (state) => {\n    return ({\n      collection: state.collectionReducer.collection, \n      dbCollection : state.collectionReducer.dbCollection,\n      zipcode: state.auth.zipcode\n    })\n  }\n\nlet mapDispatchToProps = (dispatch) => {\n    return {\n        removeFromCollectionDb: plant => dispatch(removeFromCollectionDb(plant)), \n        addToCollectionDb: (plant) => dispatch(addToCollectionDb(plant)),\n        displayCollectionDb: () => dispatch(displayCollectionDb())\n    }\n  }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Collection);"]},"metadata":{},"sourceType":"module"}